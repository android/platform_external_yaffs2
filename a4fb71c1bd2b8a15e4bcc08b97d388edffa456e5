{
  "comments": [
    {
      "key": {
        "uuid": "AAAHZn///6A\u003d",
        "filename": "yaffs2/utils/mkyaffs2image.c",
        "patchSetId": 1
      },
      "lineNbr": 390,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2012-07-18T01:47:38Z",
      "side": 1,
      "message": "Check return value on asprintf. Per man asprintf, using the sepath value is undefined if asprintf returns an error.",
      "revId": "a4fb71c1bd2b8a15e4bcc08b97d388edffa456e5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAHbH////8\u003d",
        "filename": "yaffs2/utils/mkyaffs2image.c",
        "patchSetId": 1
      },
      "lineNbr": 390,
      "author": {
        "id": 1013887
      },
      "writtenOn": "2012-07-18T02:02:56Z",
      "side": 1,
      "message": "The \"if (!sepath)\" check right after this covers the error case. If memory allocation wasn\u0027t possible, or some other error occurs, asprintf will return -1 and the contents of sepath will remain undefined. This also covers the error case possible with the strdup.",
      "parentUuid": "AAAHZn///6A\u003d",
      "revId": "a4fb71c1bd2b8a15e4bcc08b97d388edffa456e5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAHbX////8\u003d",
        "filename": "yaffs2/utils/mkyaffs2image.c",
        "patchSetId": 1
      },
      "lineNbr": 390,
      "author": {
        "id": 1013433
      },
      "writtenOn": "2012-07-18T02:29:54Z",
      "side": 1,
      "message": "The Bionic implementation sets str to NULL. Check file bionic/libc/stdio/asprintf.c line  55.",
      "parentUuid": "AAAHbH////8\u003d",
      "revId": "a4fb71c1bd2b8a15e4bcc08b97d388edffa456e5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAHaH///94\u003d",
        "filename": "yaffs2/utils/mkyaffs2image.c",
        "patchSetId": 1
      },
      "lineNbr": 390,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2012-07-18T03:35:21Z",
      "side": 1,
      "message": "please read http://blogs.23.nu/ilja/2006/10/antville-12995/\n\n“The asprintf() and vasprintf() functions [...] If sufficient space cannot be allocated, these functions will return -1. The value of ret in this situation is implementation-dependent (on OpenBSD, ret will be set to the null pointer, but this behavior should not be relied upon).”\n\nThe fact that bionic happens to set str to NULL is an implementation detail that could change at a later time, and should not be relied on.  It would be perfectly legal for bionic to set str to 0xdeadbeef on an allocation error.",
      "parentUuid": "AAAHbX////8\u003d",
      "revId": "a4fb71c1bd2b8a15e4bcc08b97d388edffa456e5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAHZn///50\u003d",
        "filename": "yaffs2/utils/mkyaffs2image.c",
        "patchSetId": 1
      },
      "lineNbr": 657,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2012-07-18T01:47:38Z",
      "side": 1,
      "message": "check asprintf return value.",
      "revId": "a4fb71c1bd2b8a15e4bcc08b97d388edffa456e5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}